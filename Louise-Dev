pipeline {
    agent any
    environment {
	RELEASE='20.04'
     }
     stages {
        stage('Build')
	    environment {
                LOG_LEVEL='INFO' 
	   }
           parallel {
		stage('linux-arm64') {
		    steps {
			echo "Building release ${RELEASE} for ${STAGE_NAME} with log level ${LOG_LEEL}..."
 		    }
		}
	stage('linux-amd64') {
                      steps {
                          echo "Building release ${RELEASE} for ${STAGE_NAME} with log level ${LOG_LEEL}..."
                      }
                  }
 	stage('windows-arm64') {
                      steps {
                          echo "Building release ${RELEASE} for ${STAGE_NAME} with log level ${LOG_LEEL}..."
			}
                  }
              }       
          }
	stage('Test') {
	    steps {
		echo "Testing release ${RELEASE}.."
		}
	    }
	stage('Deploy') {
	    input {
		message 'Deploy?'
		ok 'Do it!'
		parameters {
			string(name: 'TARGET_ENVIRONMENT', defaultValue: 'PROD', descrption: 'Target deployment environment')
			}
                 }
            steps {
		echo "Deploying release ${RELEASE} to environment ${TARGET_ENVIRONMENT}"
		}             
             }	
	}
          post{
              always {
		echo 'Prints weather deploy happened or not, success or failure'
             }
          }
} 
